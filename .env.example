################################################################################
# RAG CHATBOT WITH ELIGIBILITY MODULE - ENVIRONMENT CONFIGURATION
################################################################################

# =============================================================================
# OLLAMA/LLM CONFIGURATION
# =============================================================================

# Ollama server base URL
# Local: http://localhost:11434
# Remote (ngrok): https://your-ngrok-url.ngrok-free.dev
OLLAMA_BASE_URL=https://reynalda-unmelodized-miles.ngrok-free.dev

# Ollama embedding model (for RAG)
OLLAMA_EMBED_MODEL=nomic-embed-text

# Ollama chat/generation model
OLLAMA_CHAT_MODEL=llama3.2:3b

# =============================================================================
# PROVIDER SELECTION (Ollama vs Gemini)
# =============================================================================

# Choose embedding provider: "ollama" or "gemini"
ACTIVE_EMBEDDING_PROVIDER=ollama

# Choose generation provider: "ollama" or "gemini"
ACTIVE_GENERATION_PROVIDER=ollama

# =============================================================================
# GEMINI CONFIGURATION (Only needed if using Gemini provider)
# =============================================================================

# Your Google Generative AI API key
# Get it from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=

# Gemini embedding model (for RAG retrieval)
GEMINI_EMBED_MODEL=text-embedding-004

# Gemini generation model (for RAG answer generation)
GEMINI_CHAT_MODEL=gemini-2.0-flash

# Gemini thinking mode: "off", "low", "medium", or "high"
# - "off": No extended thinking
# - "low": Minimal thinking for simple queries
# - "medium": Balanced thinking for complex queries
# - "high": Extensive thinking for very complex reasoning
GEMINI_THINKING_LEVEL=low

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Directory where session logs are stored
# Logs are JSON-formatted and rotated based on idle time or age
LOG_DIR=/workspaces/organic-fishstick-RAG/logs

# Log file rotation - idle timeout in seconds (15 minutes)
# When no activity for this duration, a new log file is created
IDLE_TIMEOUT_SECONDS=900

# Log file rotation - maximum age in seconds (60 minutes)
# Log files are rotated after reaching this age regardless of activity
MAX_AGE_SECONDS=3600

# Environment label for logs (dev, staging, prod)
ENV=dev

# =============================================================================
# DATA & DATABASE PATHS
# =============================================================================

# Ollama collection directory (stores embeddings from Ollama provider)
CHROMA_PERSIST_DIR_OLLAMA=rag/chroma/ollama

# Gemini collection directory (stores embeddings from Gemini provider)
CHROMA_PERSIST_DIR_GEMINI=rag/chroma/gemini

# Path to data directory (contains PDF and DOCX files for RAG ingestion)
DATA_PATH=rag/data

# Path to eligibility data directory (contains Excel files for eligibility checks)
ELIGIBILITY_DATA_PATH=eligibility/data

# =============================================================================
# DATABASE CONFIGURATION (Chat History & Conversation Memory)
# =============================================================================

# Database type: sqlite (development) or postgresql (production)
DATABASE_TYPE=sqlite

# Database connection URL
# SQLite: sqlite:///organic-fishstick.db (auto-created in project root)
# PostgreSQL: postgresql://user:password@localhost:5432/chatbot_db
DATABASE_URL=

# How long to wait (seconds) before database initialization times out
DATABASE_TIMEOUT=30

# Connection pool size (PostgreSQL only)
DATABASE_POOL_SIZE=5

# Max overflow connections beyond pool size (PostgreSQL only)
DATABASE_MAX_OVERFLOW=5

# Timeout to get a connection from pool (seconds)
DATABASE_POOL_TIMEOUT=30

# Recycle connections after this many seconds (PostgreSQL only, prevents stale connections)
DATABASE_POOL_RECYCLE=3600

# Max retries when initializing database on startup
DATABASE_INIT_RETRY_COUNT=3

# Initial delay between retries in milliseconds (exponential backoff)
DATABASE_INIT_RETRY_DELAY_MS=100

# Log all SQL queries (debug mode): true or false
DATABASE_ECHO=false

# =============================================================================
# USER MANAGEMENT (Portal Auth)
# =============================================================================

# Session expiry in seconds (30 minutes). Cookie and server-side session TTL.
SESSION_EXPIRY_SECONDS=1800

# Set ENV=prod when behind HTTPS to enable Secure cookie flag
# ENV=dev (default) uses secure=false for localhost

# =============================================================================
# CONVERSATION MANAGEMENT
# =============================================================================

# Maximum number of active conversations per user
# When a user tries to create more than this, oldest (by relevance) is auto-hidden
MAX_ACTIVE_CONVERSATIONS=20

# Warning threshold - show notification when user reaches this count
# Notification: "You have {N} conversations. At {MAX}, older ones will be archived."
CONVERSATION_WARNING_THRESHOLD=15

# Enable conversation limiting feature (true or false)
# When disabled, users can have unlimited visible conversations
ENABLE_CONVERSATION_LIMIT=true

# =============================================================================
DEBUG_MODE=false
